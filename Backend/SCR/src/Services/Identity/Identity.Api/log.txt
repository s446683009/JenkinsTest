2022-04-19 13:47:34.435 +08:00 [DBG] Hosting starting
2022-04-19 13:47:34.516 +08:00 [INF] User profile is available. Using 'C:\Users\SoloTravelling\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2022-04-19 13:47:34.527 +08:00 [DBG] Reading data from file 'C:\Users\SoloTravelling\AppData\Local\ASP.NET\DataProtection-Keys\key-14aac32c-3f14-43eb-918c-e76455791140.xml'.
2022-04-19 13:47:34.549 +08:00 [DBG] Found key {14aac32c-3f14-43eb-918c-e76455791140}.
2022-04-19 13:47:34.560 +08:00 [DBG] Considering key {14aac32c-3f14-43eb-918c-e76455791140} with expiration date 2022-06-27 04:11:27Z as default key.
2022-04-19 13:47:34.601 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=3.1.15.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-04-19 13:47:34.603 +08:00 [DBG] Decrypting secret element using Windows DPAPI.
2022-04-19 13:47:34.604 +08:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=3.1.15.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2022-04-19 13:47:34.607 +08:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2022-04-19 13:47:34.610 +08:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2022-04-19 13:47:34.613 +08:00 [DBG] Using key {14aac32c-3f14-43eb-918c-e76455791140} as the default key.
2022-04-19 13:47:34.613 +08:00 [DBG] Key ring with default key {14aac32c-3f14-43eb-918c-e76455791140} was loaded during application startup.
2022-04-19 13:47:34.656 +08:00 [INF] Starting IdentityServer4 version 4.1.2+997a6cdd643e46cd5762b710c4ddc43574cbec2e
2022-04-19 13:47:34.753 +08:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2022-04-19 13:47:34.800 +08:00 [INF] Using the default authentication scheme Bearer for IdentityServer
2022-04-19 13:47:34.800 +08:00 [INF] Authentication scheme Bearer is configured for IdentityServer, but it is not a scheme that supports signin (like cookies). If you support interactive logins via the browser, then a cookie-based scheme should be used.
2022-04-19 13:47:34.800 +08:00 [DBG] Using Bearer as default ASP.NET Core scheme for authentication
2022-04-19 13:47:34.800 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2022-04-19 13:47:34.801 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2022-04-19 13:47:34.801 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2022-04-19 13:47:34.801 +08:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2022-04-19 13:47:34.900 +08:00 [DBG] Loaded hosting startup assembly Identity.Api
2022-04-19 13:47:34.901 +08:00 [INF] Application started. Press Ctrl+C to shut down.
2022-04-19 13:47:34.901 +08:00 [INF] Hosting environment: Development
2022-04-19 13:47:34.901 +08:00 [INF] Content root path: D:\SCR\Backend\SCR\src\Services\Identity\Identity.Api
2022-04-19 13:47:34.901 +08:00 [DBG] Hosting started
2022-04-19 13:47:34.933 +08:00 [INF] Request starting HTTP/2 GET https://localhost:44379/ - -
2022-04-19 13:47:34.934 +08:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2022-04-19 13:47:34.934 +08:00 [VRB] All hosts are allowed.
2022-04-19 13:47:34.935 +08:00 [DBG] The request path / does not match a supported file type
2022-04-19 13:47:34.957 +08:00 [DBG] 1 candidate(s) found for the request path '/'
2022-04-19 13:47:34.959 +08:00 [DBG] Endpoint 'Identity.Api.Controllers.HomeController.Index (Identity.Api)' with route pattern '{controller=Home}/{action=Index}/{id?}' is valid for the request path '/'
2022-04-19 13:47:34.960 +08:00 [DBG] Request matched endpoint 'Identity.Api.Controllers.HomeController.Index (Identity.Api)'
2022-04-19 13:47:35.024 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:47:35.027 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:47:35.030 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:47:35.033 +08:00 [VRB] No endpoint entry found for request path: /
2022-04-19 13:47:35.034 +08:00 [INF] Executing endpoint 'Identity.Api.Controllers.HomeController.Index (Identity.Api)'
2022-04-19 13:47:35.039 +08:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2022-04-19 13:47:35.052 +08:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Index() on controller Identity.Api.Controllers.HomeController (Identity.Api).
2022-04-19 13:47:35.053 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-04-19 13:47:35.053 +08:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2022-04-19 13:47:35.053 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter (Order: -2147483648)","Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2022-04-19 13:47:35.053 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-04-19 13:47:35.053 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2022-04-19 13:47:35.054 +08:00 [VRB] Resource Filter: Before executing OnResourceExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.055 +08:00 [VRB] Resource Filter: After executing OnResourceExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.055 +08:00 [DBG] Executing controller factory for controller Identity.Api.Controllers.HomeController (Identity.Api)
2022-04-19 13:47:35.056 +08:00 [DBG] Executed controller factory for controller Identity.Api.Controllers.HomeController (Identity.Api)
2022-04-19 13:47:35.056 +08:00 [VRB] Action Filter: Before executing OnActionExecutionAsync on filter Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter.
2022-04-19 13:47:35.056 +08:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:47:35.057 +08:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:47:35.060 +08:00 [INF] Executing action method Identity.Api.Controllers.HomeController.Index (Identity.Api) - Validation state: "Valid"
2022-04-19 13:47:35.071 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:47:35.220 +08:00 [INF] Executed action method Identity.Api.Controllers.HomeController.Index (Identity.Api), returned result Microsoft.AspNetCore.Mvc.ViewResult in 157.487ms.
2022-04-19 13:47:35.221 +08:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:47:35.221 +08:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:47:35.221 +08:00 [VRB] Action Filter: After executing OnActionExecutionAsync on filter Microsoft.AspNetCore.Mvc.Filters.ControllerActionFilter.
2022-04-19 13:47:35.222 +08:00 [VRB] Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.222 +08:00 [VRB] Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.223 +08:00 [VRB] Before executing action result Microsoft.AspNetCore.Mvc.ViewResult.
2022-04-19 13:47:35.225 +08:00 [DBG] Initializing Razor view compiler with compiled view: '/Views/Home/Index.cshtml'.
2022-04-19 13:47:35.225 +08:00 [DBG] Initializing Razor view compiler with compiled view: '/Views/Home/Privacy.cshtml'.
2022-04-19 13:47:35.231 +08:00 [DBG] View lookup cache miss for view 'Index' in controller 'Home'.
2022-04-19 13:47:35.232 +08:00 [VRB] Located compiled view for view at path '/Views/Home/Index.cshtml'.
2022-04-19 13:47:35.233 +08:00 [VRB] Could not find a file for view at path '/Views/Home/_ViewStart.cshtml'.
2022-04-19 13:47:35.233 +08:00 [VRB] Could not find a file for view at path '/Views/_ViewStart.cshtml'.
2022-04-19 13:47:35.233 +08:00 [VRB] Could not find a file for view at path '/_ViewStart.cshtml'.
2022-04-19 13:47:35.237 +08:00 [INF] Executing ViewResult, running view Index.
2022-04-19 13:47:35.240 +08:00 [DBG] The view path '/Views/Home/Index.cshtml' was found in 6.8006ms.
2022-04-19 13:47:35.293 +08:00 [INF] Executed ViewResult - view Index executed in 63.4768ms.
2022-04-19 13:47:35.294 +08:00 [VRB] After executing action result Microsoft.AspNetCore.Mvc.ViewResult.
2022-04-19 13:47:35.294 +08:00 [VRB] Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.294 +08:00 [VRB] Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.294 +08:00 [VRB] Resource Filter: Before executing OnResourceExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.294 +08:00 [VRB] Resource Filter: After executing OnResourceExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:47:35.295 +08:00 [INF] Executed action Identity.Api.Controllers.HomeController.Index (Identity.Api) in 240.6988ms
2022-04-19 13:47:35.295 +08:00 [INF] Executed endpoint 'Identity.Api.Controllers.HomeController.Index (Identity.Api)'
2022-04-19 13:47:35.301 +08:00 [DBG] Connection ID "18230571293206380545" disconnecting.
2022-04-19 13:47:35.305 +08:00 [INF] Request finished HTTP/2 GET https://localhost:44379/ - - - 200 - text/html;+charset=utf-8 373.6192ms
2022-04-19 13:48:11.348 +08:00 [INF] Request starting HTTP/1.1 POST https://localhost:44379/api/v1/Account/register application/json 211
2022-04-19 13:48:11.349 +08:00 [VRB] All hosts are allowed.
2022-04-19 13:48:11.349 +08:00 [DBG] POST requests are not supported
2022-04-19 13:48:11.356 +08:00 [DBG] 1 candidate(s) found for the request path '/api/v1/Account/register'
2022-04-19 13:48:11.356 +08:00 [DBG] Endpoint 'Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api)' with route pattern 'api/v1/Account/register' is valid for the request path '/api/v1/Account/register'
2022-04-19 13:48:11.358 +08:00 [DBG] Request matched endpoint 'Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api)'
2022-04-19 13:48:11.362 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:48:11.364 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:48:11.367 +08:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2022-04-19 13:48:11.372 +08:00 [VRB] No endpoint entry found for request path: /api/v1/Account/register
2022-04-19 13:48:11.372 +08:00 [INF] Executing endpoint 'Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api)'
2022-04-19 13:48:11.383 +08:00 [INF] Route matched with {action = "Register", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Identity.Api.Models.Api.ApiResult`1[System.Boolean]] RegisterAsync(Identity.Application.Dto.RegisterRequest) on controller Identity.Api.Controllers.Api.AccountController (Identity.Api).
2022-04-19 13:48:11.383 +08:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2022-04-19 13:48:11.383 +08:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter"]
2022-04-19 13:48:11.383 +08:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2022-04-19 13:48:11.383 +08:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2022-04-19 13:48:11.383 +08:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter","Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2022-04-19 13:48:11.383 +08:00 [VRB] Resource Filter: Before executing OnResourceExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:11.383 +08:00 [VRB] Resource Filter: After executing OnResourceExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:11.383 +08:00 [DBG] Executing controller factory for controller Identity.Api.Controllers.Api.AccountController (Identity.Api)
2022-04-19 13:48:11.386 +08:00 [DBG] Executed controller factory for controller Identity.Api.Controllers.Api.AccountController (Identity.Api)
2022-04-19 13:48:11.389 +08:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest' ...
2022-04-19 13:48:11.391 +08:00 [DBG] Attempting to bind parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest' using the name '' in request data ...
2022-04-19 13:48:11.392 +08:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2022-04-19 13:48:11.409 +08:00 [DBG] JSON input formatter succeeded, deserializing to type 'Identity.Application.Dto.RegisterRequest'
2022-04-19 13:48:11.410 +08:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest'.
2022-04-19 13:48:11.410 +08:00 [DBG] Done attempting to bind parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest'.
2022-04-19 13:48:11.410 +08:00 [DBG] Attempting to validate the bound parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest' ...
2022-04-19 13:48:11.413 +08:00 [DBG] Done attempting to validate the bound parameter 'registerRequest' of type 'Identity.Application.Dto.RegisterRequest'.
2022-04-19 13:48:11.414 +08:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:48:11.414 +08:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:48:11.415 +08:00 [VRB] Action Filter: Before executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2022-04-19 13:48:11.415 +08:00 [VRB] Action Filter: After executing OnActionExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2022-04-19 13:48:11.415 +08:00 [INF] Executing action method Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api) - Validation state: "Valid"
2022-04-19 13:48:11.415 +08:00 [VRB] Executing action method Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api) with arguments (["Identity.Application.Dto.RegisterRequest"])
2022-04-19 13:48:11.876 +08:00 [DBG] The index {'CompaniesCompanyId'} was not created on entity type 'CompanyUser (Dictionary<string, object>)' as the properties are already covered by the index {'CompaniesCompanyId', 'UsersUserId'}.
2022-04-19 13:48:11.876 +08:00 [DBG] The index {'PermissionsPermissionId'} was not created on entity type 'PermissionRole (Dictionary<string, object>)' as the properties are already covered by the index {'PermissionsPermissionId', 'RolesRoleId'}.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'CompaniesCompanyId.CompanyUser (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'UsersUserId.CompanyUser (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'PermissionId1.PermissionAction' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'UserId.Role' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'PermissionsPermissionId.PermissionRole (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:11.953 +08:00 [DBG] The property 'RolesRoleId.PermissionRole (Dictionary<string, object>)' was created in shadow state because there are no eligible CLR members with a matching name.
2022-04-19 13:48:12.052 +08:00 [INF] Entity Framework Core 5.0.16 initialized 'IdentityContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL' with options: MigrationsAssembly=Identity.Infrastructure 
2022-04-19 13:48:12.093 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(t => t.IsDeleted == False && t.Account == __userName_0)
    .SingleOrDefault()'
2022-04-19 13:48:12.381 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Account (string), 1], [Property: User.CreatedBy (int) Required, 2], [Property: User.CreatedTime (DateTime) Required, 3], [Property: User.DefaultCompanyId (int) Required, 4], [Property: User.Descrption (string), 5], [Property: User.Email (string) MaxLength(50), 6], [Property: User.IsActived (bool) Required, 7], [Property: User.IsDeleted (bool) Required, 8], [Property: User.Mobile (string) MaxLength(50), 9], [Property: User.ModifiedBy (int) Required, 10], [Property: User.ModifiedTime (DateTime) Required, 11], [Property: User.Password (string), 12], [Property: User.PswEncryptCode (string), 13], }
            SELECT TOP(2) u.UserId, u.Account, u.CreatedBy, u.CreatedTime, u.DefaultCompanyId, u.Descrption, u.Email, u.IsActived, u.IsDeleted, u.Mobile, u.ModifiedBy, u.ModifiedTime, u.Password, u.PswEncryptCode
            FROM User AS u
            WHERE (u.IsDeleted == FALSE) && (u.Account == @__userName_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Identity.Infrastructure.RDB.IdentityContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-04-19 13:48:12.411 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-04-19 13:48:12.435 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (21ms).
2022-04-19 13:48:12.439 +08:00 [DBG] Opening connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:15.639 +08:00 [DBG] Opened connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:15.646 +08:00 [DBG] Executing DbCommand [Parameters=[@__userName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."Account", u."CreatedBy", u."CreatedTime", u."DefaultCompanyId", u."Descrption", u."Email", u."IsActived", u."IsDeleted", u."Mobile", u."ModifiedBy", u."ModifiedTime", u."Password", u."PswEncryptCode"
FROM "User" AS u
WHERE NOT (u."IsDeleted") AND (u."Account" = @__userName_0)
LIMIT 2
2022-04-19 13:48:16.991 +08:00 [INF] Executed DbCommand (1,343ms) [Parameters=[@__userName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."Account", u."CreatedBy", u."CreatedTime", u."DefaultCompanyId", u."Descrption", u."Email", u."IsActived", u."IsDeleted", u."Mobile", u."ModifiedBy", u."ModifiedTime", u."Password", u."PswEncryptCode"
FROM "User" AS u
WHERE NOT (u."IsDeleted") AND (u."Account" = @__userName_0)
LIMIT 2
2022-04-19 13:48:16.997 +08:00 [DBG] A data reader was disposed.
2022-04-19 13:48:17.000 +08:00 [DBG] Closing connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.003 +08:00 [DBG] Closed connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.005 +08:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Where(t => t.IsDeleted == False && t.Mobile == __mobile_0)
    .SingleOrDefault()'
2022-04-19 13:48:17.010 +08:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.SelectExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.UserId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.Account (string), 1], [Property: User.CreatedBy (int) Required, 2], [Property: User.CreatedTime (DateTime) Required, 3], [Property: User.DefaultCompanyId (int) Required, 4], [Property: User.Descrption (string), 5], [Property: User.Email (string) MaxLength(50), 6], [Property: User.IsActived (bool) Required, 7], [Property: User.IsDeleted (bool) Required, 8], [Property: User.Mobile (string) MaxLength(50), 9], [Property: User.ModifiedBy (int) Required, 10], [Property: User.ModifiedTime (DateTime) Required, 11], [Property: User.Password (string), 12], [Property: User.PswEncryptCode (string), 13], }
            SELECT TOP(2) u.UserId, u.Account, u.CreatedBy, u.CreatedTime, u.DefaultCompanyId, u.Descrption, u.Email, u.IsActived, u.IsDeleted, u.Mobile, u.ModifiedBy, u.ModifiedTime, u.Password, u.PswEncryptCode
            FROM User AS u
            WHERE (u.IsDeleted == FALSE) && (u.Mobile == @__mobile_0)), 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        Identity.Infrastructure.RDB.IdentityContext, 
        False, 
        False
    ), 
    cancellationToken: queryContext.CancellationToken)'
2022-04-19 13:48:17.011 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-04-19 13:48:17.011 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-04-19 13:48:17.011 +08:00 [DBG] Opening connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.011 +08:00 [DBG] Opened connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.011 +08:00 [DBG] Executing DbCommand [Parameters=[@__mobile_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."Account", u."CreatedBy", u."CreatedTime", u."DefaultCompanyId", u."Descrption", u."Email", u."IsActived", u."IsDeleted", u."Mobile", u."ModifiedBy", u."ModifiedTime", u."Password", u."PswEncryptCode"
FROM "User" AS u
WHERE NOT (u."IsDeleted") AND (u."Mobile" = @__mobile_0)
LIMIT 2
2022-04-19 13:48:17.299 +08:00 [INF] Executed DbCommand (288ms) [Parameters=[@__mobile_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."UserId", u."Account", u."CreatedBy", u."CreatedTime", u."DefaultCompanyId", u."Descrption", u."Email", u."IsActived", u."IsDeleted", u."Mobile", u."ModifiedBy", u."ModifiedTime", u."Password", u."PswEncryptCode"
FROM "User" AS u
WHERE NOT (u."IsDeleted") AND (u."Mobile" = @__mobile_0)
LIMIT 2
2022-04-19 13:48:17.299 +08:00 [DBG] A data reader was disposed.
2022-04-19 13:48:17.300 +08:00 [DBG] Closing connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.300 +08:00 [DBG] Closed connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.305 +08:00 [DBG] Compiling query expression: 
'DbSet<Company>()
    .Where(t => t.IsDeleted == False && __companyIds_0.Contains(t.CompanyId))'
2022-04-19 13:48:17.329 +08:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Company>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.SelectExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Company.CompanyId (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Company.CreatedBy (int) Required, 1], [Property: Company.CreatedTime (DateTime) Required, 2], [Property: Company.IsDeleted (bool) Required, 3], [Property: Company.ModifiedBy (int) Required, 4], [Property: Company.ModifiedTime (DateTime) Required, 5], [Property: Company.Name (string) Required, 6], }
        SELECT c.CompanyId, c.CreatedBy, c.CreatedTime, c.IsDeleted, c.ModifiedBy, c.ModifiedTime, c.Name
        FROM Company AS c
        WHERE (c.IsDeleted == FALSE) && c.CompanyId IN (@__companyIds_0)), 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Company>, 
    Identity.Infrastructure.RDB.IdentityContext, 
    False, 
    False
)'
2022-04-19 13:48:17.331 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-04-19 13:48:17.331 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-04-19 13:48:17.331 +08:00 [DBG] Opening connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.331 +08:00 [DBG] Opened connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.332 +08:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CompanyId", c."CreatedBy", c."CreatedTime", c."IsDeleted", c."ModifiedBy", c."ModifiedTime", c."Name"
FROM "Company" AS c
WHERE NOT (c."IsDeleted") AND (c."CompanyId" = 0)
2022-04-19 13:48:17.603 +08:00 [INF] Executed DbCommand (271ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."CompanyId", c."CreatedBy", c."CreatedTime", c."IsDeleted", c."ModifiedBy", c."ModifiedTime", c."Name"
FROM "Company" AS c
WHERE NOT (c."IsDeleted") AND (c."CompanyId" = 0)
2022-04-19 13:48:17.604 +08:00 [DBG] A data reader was disposed.
2022-04-19 13:48:17.604 +08:00 [DBG] Closing connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.604 +08:00 [DBG] Closed connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.627 +08:00 [DBG] 'IdentityContext' generated a temporary value for the property 'UserId.User'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-04-19 13:48:17.684 +08:00 [DBG] Context 'IdentityContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2022-04-19 13:48:17.686 +08:00 [DBG] SaveChanges starting for 'IdentityContext'.
2022-04-19 13:48:17.688 +08:00 [DBG] DetectChanges starting for 'IdentityContext'.
2022-04-19 13:48:17.699 +08:00 [DBG] DetectChanges completed for 'IdentityContext'.
2022-04-19 13:48:17.710 +08:00 [DBG] Opening connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.710 +08:00 [DBG] Opened connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:17.712 +08:00 [DBG] Beginning transaction with isolation level 'Unspecified'.
2022-04-19 13:48:17.715 +08:00 [DBG] Began transaction with isolation level 'ReadCommitted'.
2022-04-19 13:48:17.745 +08:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2022-04-19 13:48:17.746 +08:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2022-04-19 13:48:17.747 +08:00 [DBG] Executing DbCommand [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "User" ("Account", "CreatedBy", "CreatedTime", "DefaultCompanyId", "Descrption", "Email", "IsActived", "IsDeleted", "Mobile", "ModifiedBy", "ModifiedTime", "Password", "PswEncryptCode")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "UserId";
2022-04-19 13:48:18.030 +08:00 [INF] Executed DbCommand (284ms) [Parameters=[@p0='?', @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?', @p5='?', @p6='?' (DbType = Boolean), @p7='?' (DbType = Boolean), @p8='?', @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?', @p12='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "User" ("Account", "CreatedBy", "CreatedTime", "DefaultCompanyId", "Descrption", "Email", "IsActived", "IsDeleted", "Mobile", "ModifiedBy", "ModifiedTime", "Password", "PswEncryptCode")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12)
RETURNING "UserId";
2022-04-19 13:48:18.042 +08:00 [DBG] A data reader was disposed.
2022-04-19 13:48:18.318 +08:00 [DBG] Disposing transaction.
2022-04-19 13:48:18.320 +08:00 [DBG] Closing connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:18.320 +08:00 [DBG] Closed connection to database 'Identity' on server 'tcp://159.75.212.177:5432'.
2022-04-19 13:48:18.358 +08:00 [ERR] An exception occurred in the database while saving changes for context type 'Identity.Infrastructure.RDB.IdentityContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while updating the entries. See the inner exception for details.
 ---> System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection. (Parameter 'index')
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Update.Internal.NpgsqlModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(DbContext _, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2022-04-19 13:48:18.528 +08:00 [INF] Executed action method Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api), returned result Microsoft.AspNetCore.Mvc.ObjectResult in 7112.948ms.
2022-04-19 13:48:18.528 +08:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2022-04-19 13:48:18.528 +08:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter.
2022-04-19 13:48:18.529 +08:00 [VRB] Action Filter: Before executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:48:18.529 +08:00 [VRB] Action Filter: After executing OnActionExecuted on filter Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter.
2022-04-19 13:48:18.529 +08:00 [VRB] Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.529 +08:00 [VRB] Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.530 +08:00 [VRB] Result Filter: Before executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2022-04-19 13:48:18.530 +08:00 [VRB] Result Filter: After executing OnResultExecuting on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2022-04-19 13:48:18.530 +08:00 [VRB] Before executing action result Microsoft.AspNetCore.Mvc.ObjectResult.
2022-04-19 13:48:18.531 +08:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2022-04-19 13:48:18.533 +08:00 [DBG] No information found on request to perform content negotiation.
2022-04-19 13:48:18.533 +08:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2022-04-19 13:48:18.533 +08:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2022-04-19 13:48:18.534 +08:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2022-04-19 13:48:18.534 +08:00 [INF] Executing ObjectResult, writing value of type 'Identity.Api.Models.Api.ApiResult`1[[System.Boolean, System.Private.CoreLib, Version=5.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2022-04-19 13:48:18.563 +08:00 [VRB] After executing action result Microsoft.AspNetCore.Mvc.ObjectResult.
2022-04-19 13:48:18.563 +08:00 [VRB] Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2022-04-19 13:48:18.563 +08:00 [VRB] Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter.
2022-04-19 13:48:18.563 +08:00 [VRB] Result Filter: Before executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.563 +08:00 [VRB] Result Filter: After executing OnResultExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.564 +08:00 [VRB] Resource Filter: Before executing OnResourceExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.564 +08:00 [VRB] Resource Filter: After executing OnResourceExecuted on filter Microsoft.AspNetCore.Mvc.ViewFeatures.Filters.SaveTempDataFilter.
2022-04-19 13:48:18.565 +08:00 [INF] Executed action Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api) in 7181.8466ms
2022-04-19 13:48:18.565 +08:00 [INF] Executed endpoint 'Identity.Api.Controllers.Api.AccountController.RegisterAsync (Identity.Api)'
2022-04-19 13:48:18.568 +08:00 [DBG] 'IdentityContext' disposed.
2022-04-19 13:48:18.570 +08:00 [INF] Request finished HTTP/1.1 POST https://localhost:44379/api/v1/Account/register application/json 211 - 200 - application/json;+charset=utf-8 7221.7272ms
